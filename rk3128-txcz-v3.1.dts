/dts-v1/;
#include "rk3128.dtsi"

/ {
    model = "TXCZ RK3128 V3.1";
    compatible = "txcz,rk3128-v3.1", "rockchip,rk3128";

    memory@60000000 {
        reg = <0x60000000 0x40000000>; /* 1GB内存（若你的设备是512MB，改为0x20000000） */
    };

    chosen {
        bootargs = "console=ttyS2,115200n8 root=/dev/mmcblk0p2 rw rootwait earlyprintk";
    };
};

&uart2 {
    status = "okay"; /* 串口调试（若你的设备串口是其他引脚，需修改） */
};

&usb_otg {
    status = "okay"; /* USB OTG接口（接打印机） */
};

&usb_host0 {
    status = "okay"; /* USB Host接口 */
};

&ethernet {
    status = "okay"; /* 以太网口（若你的设备无网口，注释此行） */
    phy = <&phy0>;
    phy-mode = "rmii";
    pinctrl-names = "default";
    pinctrl-0 = <&rmii_pins>;

    phy0: ethernet-phy@0 {
        reg = <0>;
    };
};

&pinctrl {
    rmii_pins: rmii-pins {
        rockchip,pins =
            <1 16 RK_FUNC_1 &pcfg_pull_none>, /* RMII_TXD0 */
            <1 17 RK_FUNC_1 &pcfg_pull_none>, /* RMII_TXD1 */
            <1 18 RK_FUNC_1 &pcfg_pull_none>, /* RMII_TXEN */
            <1 19 RK_FUNC_1 &pcfg_pull_none>, /* RMII_CRS_DV */
            <1 20 RK_FUNC_1 &pcfg_pull_none>, /* RMII_RXD0 */
            <1 21 RK_FUNC_1 &pcfg_pull_none>, /* RMII_RXD1 */
            <1 22 RK_FUNC_1 &pcfg_pull_none>; /* RMII_REF_CLK */
    };
};
