名称: 构建RK3128 OpenWrt打印服务器
于:
推送:
分支: [main]
工作流触发:

作业:
构建:
运行于: ubuntu-22.04
权限:
内容: 写入
步骤:
      - 名称: 结账代码
使用: actions/checkout@v4

      - 名称: Install build dependencies
运行: |
          sudo apt update -y
          sudo apt full-upgrade -y
          sudo apt install -y build-essential clang flex bison g++ gawk gcc-multilib g++-multilib gettext git libncurses-dev libssl-dev python3 rsync unzip zlib1g-dev file wget curl xz-utils squashfs-tools

      -名称：克隆 OpenWrt 23.05 源
运行：git clone -b openwrt-23.05 --depth=1 https://github.com/openwrt/openwrt.git openwrt

      - 名称: 复制RK3128 DTS文件
: mkdir -p openwrt/target/linux/rockchip/dts/legacy && cp rk3128-box.dts openwrt/target/linux/rockchip/dts/legacy/

      - 名称: 复制配置文件
运行: cp .config openwrt/

      - 名称: 更新并安装软件源
运行: cd openwrt && ./scripts/feeds update -a && ./scripts/feeds install -a

      - 名称: 构建固件
运行: cd openwrt && make defconfig && make download -j$(nproc) && make -j$(nproc) || make -j1 V=s

      - 名称: 上传固件制品
使用: actions/upload-artifact@v4
与:
          name: RK3128-OpenWrt-Printer-Firmware
路径: openwrt/bin/targets/rockchip/legacy/**/*
未找到文件: error
